/*!
 * gamepad.js v0.0.3-alpha 2014-05-31T19:11:17
 * https://github.com/neogeek/gamepad.js
 * 
 * Copyright (c) 2014 Scott Doxey
 * Released under the MIT license.
 */
!function(){"use strict";function a(a){return"[object Array]"===Object.prototype.toString.call(a)?!0:!1}function b(b,c){var d;return Object.keys(c).forEach(function(e){c[e]===b?d=e:a(c[e])&&-1!==c[e].indexOf(b)&&(d=e)}),d}function c(){this._events={keyboard:{}},this._keyMapping={keyboard:{button_1:32,start:27,d_pad_up:[38,87],d_pad_down:[40,83],d_pad_left:[37,65],d_pad_right:[39,68]}},this._listeners=[],this._requestAnimation=d(this._loop.bind(this)),document.addEventListener("keydown",this._handleEventListener.bind(this)),document.addEventListener("keyup",this._handleEventListener.bind(this))}var d,e;["webkit","moz"].forEach(function(a){d=d||window.requestAnimationFrame||window[a+"RequestAnimationFrame"]||null,e=e||window.cancelAnimationFrame||window[a+"CancelAnimationFrame"]||null}),c.prototype._handleEventListener=function(a){var c=b(a.keyCode,this._keyMapping.keyboard);c&&(this._events.keyboard[c]||(this._events.keyboard[c]={pressed:!1,hold:!1,released:!1}),"keydown"!==a.type||this._events.keyboard[c].hold?"keyup"===a.type&&(this._events.keyboard[c].released=!0,this._events.keyboard[c].hold=!1):(this._events.keyboard[c].pressed=!0,this._events.keyboard[c].hold=!1))},c.prototype._handleKeyEvent=function(a){this._events.keyboard[a].pressed?(this.trigger("press",a),this._events.keyboard[a].pressed=!1,this._events.keyboard[a].hold=!0):this._events.keyboard[a].hold?this.trigger("hold",a):this._events.keyboard[a].released&&(this.trigger("release",a),this._events.keyboard[a].released=!1)},c.prototype._loop=function(){Object.keys(this._events.keyboard).map(this._handleKeyEvent.bind(this)),this._requestAnimation=d(this._loop.bind(this))},c.prototype.on=function(a,b,c,d){this._listeners.push({type:a,button:b,callback:c,options:d})},c.prototype.trigger=function(a,b){this._listeners.forEach(function(c){c.type===a&&c.button===b&&c.callback(c)})},"function"==typeof define&&void 0!==define.amd?define([],c):"object"==typeof module&&void 0!==module.exports?module.exports=c:window.Gamepad=c}();